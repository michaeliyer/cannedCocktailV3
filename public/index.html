<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Canned Cocktail V3</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <body>
      <h1>Canned Cocktail Inventory V3</h1>

      <!-- Customers Section -->
      <div class="section-container">
        <button
          type="button"
          class="toggle-btn"
          onclick="toggleSection('customersSection')"
        >
          üë• Customers <span class="toggle-icon">‚ñº</span>
        </button>
        <div
          id="customersSection"
          class="collapsible-section"
          style="display: none"
        >
          <h2>Add Customer</h2>
          <form id="customerForm">
            <input
              type="text"
              name="name"
              placeholder="Customer Name"
              required
            />
            <input type="email" name="email" placeholder="Email" />
            <input type="tel" name="phone" placeholder="Phone" />
            <textarea name="notes" placeholder="Notes"></textarea>
            <button type="submit">Add Customer</button>
          </form>
          <h2>All Customers</h2>
          <ul id="customerList"></ul>
        </div>
      </div>
      <hr />
      <hr />

      <!-- Products Section -->
      <div class="section-container">
        <button
          type="button"
          class="toggle-btn"
          onclick="toggleSection('productsSection')"
        >
          üì¶ Products <span class="toggle-icon">‚ñº</span>
        </button>
        <div
          id="productsSection"
          class="collapsible-section"
          style="display: none"
        >
          <h2>Add a Product</h2>
          <form id="productForm">
            <input type="text" id="name" placeholder="Name" required />
            <input type="text" id="description" placeholder="Description" />
            <input type="text" id="category" placeholder="Category" />
            <button type="submit">Add Product</button>
          </form>
          <h2>All Products</h2>
          <ul id="productList"></ul>
        </div>
      </div>
      <hr />
      <hr />

      <!-- Variants Section -->
      <div class="section-container">
        <button
          type="button"
          class="toggle-btn"
          onclick="toggleSection('variantsSection')"
        >
          üè∑Ô∏è Product Variants <span class="toggle-icon">‚ñº</span>
        </button>
        <div
          id="variantsSection"
          class="collapsible-section"
          style="display: none"
        >
          <h2>Add a Product Variant</h2>
          <form id="variantForm">
            <select id="variantProductSelect" required></select>
            <input
              type="text"
              id="variantSize"
              placeholder="Size (e.g. 4 x 1gallon)"
              required
            />
            <input
              type="number"
              id="variantPrice"
              placeholder="Price (e.g. 100.00)"
              step="0.01"
              required
            />
            <input
              type="number"
              id="variantStock"
              placeholder="Units in stock"
              required
            />
            <button type="submit">Add Variant</button>
          </form>
          <h2>All Products & Variants</h2>
          <div id="productWithVariants"></div>
        </div>
      </div>

      <hr />
      <hr />

      <!-- Create Order Section -->
      <div class="section-container">
        <button
          type="button"
          class="toggle-btn"
          onclick="toggleSection('createOrderSection')"
        >
          üõí Create Order <span class="toggle-icon">‚ñº</span>
        </button>
        <div
          id="createOrderSection"
          class="collapsible-section"
          style="display: none"
        >
          <h2>Create Order</h2>
          <form id="orderForm">
            <label for="orderCustomer">Customer:</label>
            <select id="orderCustomer" required></select>

            <div id="orderItemsContainer"></div>
            <button type="button" onclick="addOrderItem()">‚ûï Add Item</button>

            <p>
              <strong>Total: $<span id="orderTotal">0.00</span></strong>
            </p>

            <button type="submit">‚úÖ Submit Order</button>
          </form>
        </div>
      </div>

      <hr />
      <hr />

      <!-- Orders Section -->
      <div class="section-container">
        <button
          type="button"
          class="toggle-btn"
          onclick="toggleSection('ordersSection')"
        >
          üìã All Orders <span class="toggle-icon">‚ñº</span>
        </button>
        <div
          id="ordersSection"
          class="collapsible-section"
          style="display: none"
        >
          <button onclick="loadAllOrders()">View All Orders</button>
          <h2>Orders:</h2>
          <table id="ordersTable">
            <thead>
              <tr>
                <th>Order ID</th>
                <th>Date</th>
                <th>Customer</th>
                <th>Product</th>
                <th>Size</th>
                <th>Quantity</th>
                <th>Unit Price</th>
                <th>Subtotal</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>

      <hr />
      <hr />

      <!-- Payments Section -->
      <div class="section-container">
        <button
          type="button"
          class="toggle-btn"
          onclick="toggleSection('paymentsSection')"
        >
          üí≥ Payments <span class="toggle-icon">‚ñº</span>
        </button>
        <div
          id="paymentsSection"
          class="collapsible-section"
          style="display: none"
        >
          <h2>Add Payment</h2>
          <form id="paymentForm">
            <label for="paymentOrder">Order:</label>
            <select id="paymentOrder" required>
              <option value="">Select Order</option>
            </select>
            <div id="orderBalanceInfo" style="margin: 0.5rem 0; color: #666"></div>
            <label for="paymentAmount">Amount:</label>
            <input
              type="number"
              id="paymentAmount"
              placeholder="0.00"
              step="0.01"
              min="0.01"
              required
            />
            <label for="paymentMethod">Payment Method:</label>
            <select id="paymentMethod" required>
              <option value="">Select Method</option>
              <option value="cash">Cash</option>
              <option value="credit">Credit Card</option>
              <option value="check">Check</option>
              <option value="other">Other</option>
            </select>
            <label for="paymentNote">Note (optional):</label>
            <textarea id="paymentNote" placeholder="Payment note"></textarea>
            <button type="submit">Add Payment</button>
          </form>
          <div id="paymentStatus" style="margin-top: 1rem"></div>

          <hr />

          <h2>Payment History</h2>
          <label for="viewPaymentsOrder">View payments for order:</label>
          <select id="viewPaymentsOrder">
            <option value="">Select Order</option>
          </select>
          <button onclick="viewPaymentHistory()">View History</button>
          <div id="paymentHistory" style="margin-top: 1rem"></div>

          <hr />

          <h2>Updated Orders with Balances</h2>
          <button onclick="toggleOrdersWithBalances()">
            <span id="ordersToggleText">Show</span> Orders with Payment Balances
          </button>
          <div id="ordersWithBalances" style="display: none; margin-top: 1rem">
            <button onclick="loadOrdersWithBalances()" style="margin-bottom: 1rem">
              Refresh
            </button>
            <table
              id="ordersBalancesTable"
              style="width: 100%; border-collapse: collapse"
            >
              <thead>
                <tr>
                  <th style="border: 1px solid #ddd; padding: 0.5rem">Order ID</th>
                  <th style="border: 1px solid #ddd; padding: 0.5rem">Date</th>
                  <th style="border: 1px solid #ddd; padding: 0.5rem">Customer</th>
                  <th style="border: 1px solid #ddd; padding: 0.5rem">
                    Order Total
                  </th>
                  <th style="border: 1px solid #ddd; padding: 0.5rem">
                    Total Paid
                  </th>
                  <th style="border: 1px solid #ddd; padding: 0.5rem">
                    Balance Due
                  </th>
                  <th style="border: 1px solid #ddd; padding: 0.5rem">Status</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>

      <hr />
      <hr />

      <!-- Sales Reports Section -->
      <div class="section-container">
        <button
          type="button"
          class="toggle-btn"
          onclick="toggleSection('salesReportsSection')"
        >
          üìä Sales Reports <span class="toggle-icon">‚ñº</span>
        </button>
        <div
          id="salesReportsSection"
          class="collapsible-section"
          style="display: none"
        >
          <h2>Sales Reports</h2>
      <div class="card">
        <form id="salesReportForm">
          <div
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
              gap: 1rem;
              margin-bottom: 1rem;
            "
          >
            <div>
              <label for="reportCustomer">Filter by Customer:</label>
              <select id="reportCustomer">
                <option value="">All Customers</option>
              </select>
            </div>

            <div>
              <label for="reportStatus">Order Status:</label>
              <select id="reportStatus">
                <option value="all">All Orders</option>
                <option value="open">Open Orders Only</option>
                <option value="closed">Closed Orders Only</option>
              </select>
            </div>

            <div>
              <label for="reportExactDate">Exact Date:</label>
              <input type="date" id="reportExactDate" />
            </div>

            <div>
              <label for="reportStartDate">Start Date (Range):</label>
              <input type="date" id="reportStartDate" />
            </div>

            <div>
              <label for="reportEndDate">End Date (Range):</label>
              <input type="date" id="reportEndDate" />
            </div>

            <div>
              <label for="reportProduct">Filter by Product:</label>
              <select id="reportProduct">
                <option value="">All Products</option>
              </select>
            </div>

            <div>
              <label for="reportVariant">Filter by Variant:</label>
              <select id="reportVariant">
                <option value="">All Variants</option>
              </select>
            </div>
          </div>

          <div style="display: flex; gap: 1rem; margin-top: 1rem">
            <button type="submit">Generate Report</button>
            <button type="button" onclick="clearReportFilters()">
              Clear Filters
            </button>
          </div>
        </form>
      </div>

      <div id="salesReportResults" style="display: none; margin-top: 2rem">
        <div
          class="card"
          id="reportSummary"
          style="
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin-bottom: 1.5rem;
          "
        >
          <h3
            style="
              color: white;
              border-bottom: 2px solid rgba(255, 255, 255, 0.3);
            "
          >
            Report Summary
          </h3>
          <div
            id="summaryContent"
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
              gap: 1rem;
              margin-top: 1rem;
            "
          ></div>
        </div>

        <div class="card">
          <h3>Orders</h3>
          <div id="reportOrdersTable"></div>
        </div>
        </div>
      </div>

      <script src="script.js"></script>
    </body>
  </body>
</html>
